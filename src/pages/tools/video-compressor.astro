---
import Tool from '../../layouts/Tool.astro';
---

<Tool
	title="Video Compressor – Reduce Video Size Online | SinzTools"
	description="Compress videos online for free. Reduce file size while maintaining quality. Fast browser-based compression to WebM format."
	tool="video-compressor"
>
<style>
.progress-container {
    margin: 20px 0;
    display: none;
}

.progress-bar {
    width: 100%;
    height: 20px;
    background: #f0f0f0;
    border-radius: 10px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: #28a745;
    width: 0%;
    transition: width 0.2s linear;
}

.cancel-btn {
    margin-top: 10px;
    padding: 6px 12px;
    background-color: #dc3545;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.cancel-btn:hover {
    background-color: #c82333;
}

.warning-text {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    color: #856404;
    padding: 10px;
    border-radius: 4px;
    margin: 10px 0;
}

.controls-section {
	margin: 20px 0;
	padding: 15px;
	background: #f8f9fa;
	border-radius: 8px;
	border-left: 4px solid #007bff;
}

.control-group {
	margin-bottom: 20px;
}

.control-group label {
	display: block;
	margin-bottom: 8px;
	font-weight: 600;
	color: #333;
}

.quality-presets {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
	gap: 10px;
	margin-top: 10px;
}

.preset-btn {
	padding: 15px 10px;
	border: 2px solid #ddd;
	border-radius: 8px;
	background: white;
	color: #333;
	cursor: pointer;
	transition: all 0.2s;
	text-align: center;
}

.preset-btn:hover {
	border-color: #007bff;
	transform: translateY(-2px);
	box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.preset-btn.active {
	background: #007bff;
	color: white;
	border-color: #007bff;
}

.preset-label {
	display: block;
	font-weight: 600;
	font-size: 16px;
	margin-bottom: 4px;
}

.preset-desc {
	display: block;
	font-size: 12px;
	opacity: 0.8;
}
</style>

<a href="#main-content" class="skip-link">Skip to main content</a>
<h1>Video Compressor</h1>
<p>Compress your videos to reduce file size. Fast compression.</p>

<div class="privacy-note">
	<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="icon">
		<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.623 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"/>
	</svg>
	Runs locally — no uploads. Your videos never leave your device.
</div>

<div class="warning-text" id="browserWarning" style="display: none;">
    <strong>Browser Compatibility:</strong> This tool requires a modern browser with WebAssembly support (Chrome/Edge/Firefox/Safari).
</div>

<h2>Upload Video</h2>
<div class="drop-zone" id="dropZone">
    <input type="file" id="fileInput" accept="video/*" required style="display: none;">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="icon">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"/>
    </svg>
    <p>Drop a video here or <label for="fileInput">browse</label></p>
</div>

<div id="fileInfo" style="display: none; margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px; border-left: 4px solid #007bff;">
    <strong>Selected file:</strong> <span id="fileName"></span> (<span id="fileSize"></span>)
</div>

<div class="controls-section" id="controlsSection" style="display: none;">
	<h3>Compression Settings</h3>

	<div class="control-group">
		<label>Quality Preset</label>
		<div class="quality-presets">
			<button type="button" class="preset-btn" data-preset="low">
				<span class="preset-label">Low</span>
				<span class="preset-desc">Smallest file</span>
			</button>
			<button type="button" class="preset-btn active" data-preset="balanced">
				<span class="preset-label">Balanced</span>
				<span class="preset-desc">Recommended</span>
			</button>
			<button type="button" class="preset-btn" data-preset="high">
				<span class="preset-label">High</span>
				<span class="preset-desc">Best quality</span>
			</button>
		</div>
	</div>
</div>

<button class="tool-btn" id="compressBtn" style="display: none;">Compress Video</button>

<div class="progress-container" id="progressContainer">
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    <div id="progressText" style="margin-top: 10px;">Preparing...</div>
    <button type="button" id="cancelBtn" class="cancel-btn">Cancel</button>
</div>

<div id="errorMessage" class="error-message"></div>
<div id="output" style="margin-top: 20px;"></div>

<h2>How this Video Compressor works</h2>
<p>This tool uses your browser's built-in encoder (MediaRecorder) to compress videos to WebM format. Choose from three quality presets to balance file size and quality. All processing happens locally in your browser — videos stay private and secure.</p>

<h2>About WebM format</h2>
<p><strong>WebM</strong> is a modern, open video format that works in all major browsers (Chrome, Firefox, Edge, Opera). Most devices and video players support WebM playback.</p>
<p>If you need MP4 specifically, you can use desktop software like <a href="https://handbrake.fr/" target="_blank" rel="noopener">HandBrake</a> or <a href="https://www.videolan.org/vlc/" target="_blank" rel="noopener">VLC</a> to convert the compressed WebM file.</p>
</Tool>
